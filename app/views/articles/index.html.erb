<div class="container-fluid">
  <%= render "layouts/navbar" %>
<h1>Articles</h1>

<% if notice %>
    <p><%= notice %></p>
<% end %>

<%= link_to "New Article", new_article_path %>
<br><br>

<%# Melakukan pencarian berdasarkan title dan berdasarkan status %>
<%= form_tag(articles_path, method: 'get') do %>
  <%= text_field_tag(:title, params[:title]) %>
  <%= select_tag :status, options_for_select([['None'],["Publish", true], ["Unpublish", false]]) %>
  <button type="submit" class="btn btn-success">Search</button>
<% end %>
<br>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>No</th>
      <th>Title</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <% @articles.each_with_index do |article, index| %>
      <tr>
        <td><%= index += 1 %></td>
        <td><%= link_to article.title, article %></td>
        <td>
          <% if article.status? %>
            Publish
          <% else %>
            Unpublish
          <% end %>
        </td>
        <td>
          <%= link_to "Show", article %>
          <%= link_to "Edit", edit_article_path(article) %>
          <%= link_to "Delete", article_path(article), data: {
          turbo_method: :delete,
          turbo_confirm: "Are you Sure ?"}%>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>

<%= link_to 'Logout', user_logout_path(current_user), method: :delete %>
</div>